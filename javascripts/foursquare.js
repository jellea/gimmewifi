(function(){this.venue=$$({},'<li><span data-bind="name"/></li>',{"click span":function(){return console.log(this.model.get("content")),$("#venuelist").hide(),$$.document.append($$(venuemodal,{content:this.model.get("content")}))}}),window.location.origin==="http://jellea.github.io"?(window.clientId="CRGUR0KPVTPW1TQF0NFIPJA5ZDYOSREMHOWPI3UBKDFIWZIR",window.clientSecret="QO4FNRG3SB52DWDZQ4XMWVAW1UXAGG40OXJUY50Q3MXG5WZE"):(window.clientId="21123S2W0VJYKFM0KDCDYMCUCQYZYLSHEROTKPNT1JY2SUFR",window.clientSecret="DEYFJL2KBMXUUVC0WFAAAAMLDDNX2Q351N2ORRTCQI4B1MJ0"),this.venuemodaltmp='<div id="venuemodal" class="overlay">\n  <form action="#">\n    <input placeholder="Wifi name">\n    <input placeholder="Password">\n    <button>\n  </form>\n</div>',this.venuemodal=$$({},venuemodaltmp,{"click button":function(){return console.log(this.model.get("content"))}}),this.foursquare={clientId:clientId,clientSecret:clientSecret,tipSearch:function(e){var t;return t=e.coords.latitude+","+e.coords.longitude,$.Marelle(foursquare.clientId).done(function(e){var n;return n={ll:t,client_id:foursquare.clientId,client_secret:foursquare.clientSecret,v:"20120927",query:"wifi"},$.Marelle.Tip.search(n).done(function(e){var t,n,r,i,s;i=e.response.tips,s=[];for(n=0,r=i.length;n<r;n++)t=i[n],s.push(maps.createPointer(t));return s})})},addSpot:function(){var e,t;return $("#venuelist").slideDown(500),foursquare.addSpotRotate(45),e=maps.latitude+","+maps.longitude,t={ll:e,client_id:foursquare.clientId,client_secret:foursquare.clientSecret,v:"20120927",limit:10},$.Marelle(foursquare.clientId).done(function(e){var n,r,i;return r=e.authenticateVisitor(),i=function(n){var r,i,s,o,u,a;console.log("auth success!"),$.Marelle.Venue.search(t).done(function(e){}),foursquare.venues=[],u=e.response.venues,a=[];for(s=0,o=u.length;s<o;s++)i=u[s],r=$$(venue,{content:i,name:i.name}),$$.document.append(r,"#venuelist ul"),a.push($("#venuelist").show());return a},n=function(){return console.log("auth failed!"),$.Marelle.startSession()},r.then(i,n)})},addSpotClose:function(){return $("#venuelist").slideUp(500),foursquare.addSpotRotate(-45)},addSpotRotate:function(e){return $("#addspot").animate({"-webkit-transform":"rotate("+e+"deg)","-moz-transform":"rotate("+e+"deg)","-ms-transform":"rotate("+e+"deg)","-o-transform":"rotate("+e+"deg)",transform:"rotate("+e+"deg)",zoom:1},500)}},$(function(){return $("body").prepend('<div id="addspot">+</div>'),$("#addspot").toggle(foursquare.addSpot,foursquare.addSpotClose)})}).call(this);